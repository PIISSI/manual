<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>키패드 — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        .keypad-table {
            margin-top: 1.5em;
        }
    </style>
    <script src='js/ruleseed.js'></script>
    <script>
        var filenames = [
            "1-copyright.png", "2-filledstar.png", "3-hollowstar.png", "4-smileyface.png", "5-doublek.png", "6-omega.png", "7-squidknife.png", "8-pumpkin.png",
            "9-hookn.png", "10-teepee.png", "11-six.png", "12-squigglyn.png", "13-at.png", "14-ae.png", "15-meltedthree.png", "16-euro.png", "17-circle.png",
            "18-nwithhat.png", "19-dragon.png", "20-questionmark.png", "21-paragraph.png", "22-rightc.png", "23-leftc.png", "24-pitchfork.png", "25-tripod.png",
            "26-cursive.png", "27-tracks.png", "28-balloon.png", "29-weirdnose.png", "30-upsidedowny.png", "31-bt.png"
        ];

        function setRules(rnd)
        {
            var precedenceLists = PopulatePLists(rnd);

            var trs = document.getElementsByClassName('keypad-table')[0].getElementsByTagName('TR');
            for (var row = 0; row < trs.length; row++)
            {
                var imgs = trs[row].getElementsByClassName('keypad-symbol-image');
                for (var col = 0; col < imgs.length; col++)
                    imgs[col].setAttribute('src', `img/Keypad/${precedenceLists[col][row]}`);
            }
        }

        function setDefaultRules(rnd)
        {
            setRules(rnd);
        }

        function PopulatePLists(rnd)
        {
            var pLists = [];
            var list = filenames.slice(0);
            var list2 = [];
            for (var i = 0; i < 6; i++)
            {
                var list3 = [];
                pLists.push(list3);
                var j = 0;
                if (i > 0)
                {
                    while (j < 3)
                    {
                        if (list2.length == 0)
                            break;
                        var index = rnd.next(0, list2.length);
                        list3.push(list2[index]);
                        list2.splice(index, 1);
                        j++;
                    }
                }
                while (j < 7)
                {
                    var index2 = rnd.next(0, list.length);
                    list3.push(list[index2]);
                    list2.push(list[index2]);
                    list.splice(index2, 1);
                    j++;
                }
                RandomizePList(list3, rnd);
            }
            return pLists;
        }

        // Note: this shuffling function needs to match the one in the game
        function RandomizePList(pList, rnd)
        {
            for (var i = 0; i < pList.length; i++)
            {
                var value = pList[i];
                var index = rnd.next(0, pList.length);
                pList[i] = pList[index];
                pList[index] = value;
            }
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes</span>
                <span class="page-header-section-title">키패드</span>
            </div>
            <div class="page-footer absolute-footer"></div>
            <div class="page-content">
                <img src="img/Component/Keypad.svg" class="diagram" />
                <h2>키패드에 대하여</h2>
                <p class="flavour-text">이 기호들이 무슨 뜻인지는 잘 모르겠습니다만, 오컬트와 관련이 있는 것 같네요. </p>
                <ul>
                    <li>아래의 세로 문자열들 중 오직 한 열에만 키패드에 있는 기호 4개 모두가 포함되어 있습니다. </li>
                    <li>해당하는 문자열을 찾아, 키패드의 기호들을 문자열 위에서부터 배치된 순서를 따라 차례대로 누르세요. </li>
                </ul>
                <table class="keypad-table invertible">
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/28-balloon.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/16-euro.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/1-copyright.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/11-six.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/24-pitchfork.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/11-six.png"></td>
                    </tr>
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/13-at.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/28-balloon.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/8-pumpkin.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/21-paragraph.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/4-smileyface.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/16-euro.png"></td>
                    </tr>
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/30-upsidedowny.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/23-leftc.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/26-cursive.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/31-bt.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/31-bt.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/27-tracks.png"></td>
                    </tr>
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/12-squigglyn.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/26-cursive.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/5-doublek.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/7-squidknife.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/22-rightc.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/14-ae.png"></td>
                    </tr>
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/7-squidknife.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/3-hollowstar.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/15-meltedthree.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/5-doublek.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/21-paragraph.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/24-pitchfork.png"></td>
                    </tr>
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/9-hookn.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/9-hookn.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/30-upsidedowny.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/20-questionmark.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/19-dragon.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/18-nwithhat.png"></td>
                    </tr>
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/23-leftc.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/20-questionmark.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/3-hollowstar.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/4-smileyface.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/2-filledstar.png"></td>
                        <td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/6-omega.png"></td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">페이지 1/1</div>
        </div>
    </div>
</body>
</html>
